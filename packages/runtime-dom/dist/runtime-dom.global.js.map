{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/events.ts", "../src/modules/style.ts", "../src/pathProp.ts"],
  "sourcesContent": ["import { createRenderer } from '@vue/runtime-core'\nimport { assign } from '@vue/shared'\nimport { nodeOps } from './nodeOps'\nimport { patchProp } from './pathProp'\n\nexport * from '@vue/runtime-core'\n\n// domApi \u5C5E\u6027Api\nconst renderOptions = assign(nodeOps, { patchProp })\n\nexport function render(vnode, container) {\n  createRenderer(renderOptions).render(vnode, container)\n}\n", "export const isObject = value => {\n  return typeof value === 'object' && value !== null\n}\nexport const inNumber = value => {\n  return typeof value === 'number'\n}\nexport const isFunction = value => {\n  return typeof value === 'function'\n}\nexport const isString = value => {\n  return typeof value === 'string'\n}\n\nexport const isArray = Array.isArray\n\nexport const assign = Object.assign\n\n// vue3 \u63D0\u4F9B\u7684\u5F62\u72B6\u6807\u8BC6\nexport const enum ShapeFlags {\n  ELEMENT = 1,\n  FUNCTIONAL_COMPONENT = 1 << 1,\n  STATRFUL_COMPONENT = 1 << 2,\n  TEXT_CHILDREBN = 1 << 3,\n  ARRAY_CHILDREN = 1 << 4,\n  SLOTS_CHILDREN = 1 << 5,\n  TELEPORT = 1 << 6,\n  SUSPENSE = 1 << 7,\n  COMPONENT_SHOULD_KEPP_ALICE = 1 << 8,\n  COMPONENT_KEPT_ALIVE = 1 << 9,\n  COMPONENT = ShapeFlags.STATRFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT\n}\n", "import { isArray } from './../../shared/src/index'\nimport { isString, ShapeFlags } from '@vue/shared'\n\nexport const Text = Symbol('text')\n\nexport function isVnode(value) {\n  return Boolean(value?._v_isVnode)\n}\n\n// \u5224\u65AD\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u662F\u5426\u662F\u76F8\u540C\u8282\u70B9\uFF0C1. \u6807\u7B7E\u540D\u76F8\u540C 2.key \u76F8\u540C\nexport function isSameVnode(n1, n2) {\n  return n1.type === n2.type && n1.key === n2.key\n}\n\n// \u865A\u62DF\u8282\u70B9\uFF1A \u7EC4\u4EF6\uFF0C\u5143\u7D20\uFF0C\u6587\u672C\nexport function createVnode(type, props, children = null) {\n  let shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0\n  // \u865A\u62DFdom\u5BF9\u8C61\n  const vnode = {\n    el: null, // \u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\n    type,\n    props,\n    children,\n    key: props?.['key'],\n    shapeFlag,\n    _v_isVnode: true\n  }\n  if (children) {\n    let type = 0\n    if (isArray(children)) {\n      type = ShapeFlags.ARRAY_CHILDREN\n    } else {\n      children = String(children)\n      type = ShapeFlags.TEXT_CHILDREBN\n    }\n    vnode.shapeFlag |= type\n  }\n  return vnode\n}\n", "import { isString, ShapeFlags } from '@vue/shared'\nimport { createVnode, isSameVnode, Text } from './vnode'\n\nexport function createRenderer(renderOptions) {\n  let {\n    inset: hostInset,\n    remove: hostRemove,\n    setElementText: hostSetElementText,\n    setText: hostSetText,\n    parentNode: hostParentNode,\n    nextSiblint: hostNextSiblint,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    patchProp: hostPatchProp\n  } = renderOptions\n\n  const normalize = child => {\n    if (isString(child)) {\n      return createVnode(Text, null, child)\n    }\n    return child\n  }\n\n  const mounthChildren = (children, container) => {\n    for (let i = 0; i < children.length; i++) {\n      let child = normalize(children[i])\n      patch(null, child, container)\n    }\n  }\n\n  const mountElement = (vnode, container) => {\n    const { type, props, children, shapeFlag } = vnode\n    let el = (vnode.el = hostCreateElement(type))\n    if (props) {\n      for (let key in props) {\n        hostPatchProp(el, key, null, props[key])\n      }\n    }\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREBN) {\n      // \u6587\u672C\n      hostSetElementText(el, children)\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n      mounthChildren(children, el)\n    }\n\n    hostInset(el, container)\n  }\n\n  const processText = (n1, n2, container) => {\n    if (n1 === null) {\n      hostInset((n2.el = hostCreateText(n2.children)), container)\n    } else {\n      let el = (n2.el = n1.el)\n      if (n1.children !== n2.children) {\n        hostSetText(el, n2.children)\n      }\n    }\n  }\n\n  const patchProps = (oldProps, newProps, el) => {\n    for (let key in newProps) {\n      if (newProps[key]) {\n        hostPatchProp(el, key, oldProps[key], newProps[key])\n      }\n    }\n    for (let key in oldProps) {\n      if (newProps[key] === null) {\n        hostPatchProp(el, key, oldProps[key], null)\n      }\n    }\n  }\n\n  const patchChildren = (n1, n2, el) => {\n    \n  }\n\n  // \u590D\u7528\u8282\u70B9  \u518D\u6BD4\u8F83\u5C5E\u6027\uFF0C\u518D\u6BD4\u8F83\u5B50\u8282\u70B9\n  const patchElement = (n1, n2) => {\n    let el = (n2.el = n1.el)\n    let oldProps = n1.props || {}\n    let newProps = n2.props || {}\n\n    // \u6BD4\u8F83\u5C5E\u6027\n    patchProps(oldProps, newProps, el)\n    // \u6BD4\u8F83\u5B50\u8282\u70B9\n    patchChildren(n1, n2, el)\n  }\n\n  const processElement = (n1, n2, container) => {\n    if (n1 === null) {\n      mountElement(n2, container)\n    } else {\n      patchElement(n1, n2)\n    }\n  }\n\n  const patch = (n1, n2, container) => {\n    if (n1 === n2) return\n    if (n1 && !isSameVnode(n1, n2)) {\n      unmount(n1)\n      n1 = null\n    }\n    const { type, shapeFlag } = n2\n    // \u521D\u6B21\u6E32\u67D3\n    // \u76EE\u524D\u5904\u7406\u5143\u7D20\u7684\u521D\u6B21\u6E32\u67D3\n    switch (type) {\n      case Text:\n        processText(n1, n2, container)\n        break\n      default:\n        if (shapeFlag & ShapeFlags.ELEMENT) {\n          processElement(n1, n2, container)\n        }\n    }\n  }\n\n  const unmount = vnode => {\n    hostRemove(vnode.el)\n  }\n\n  const render = (vnode, container) => {\n    if (vnode === null) {\n      if (container._vnode) {\n        unmount(container._vnode)\n      }\n    } else {\n      // \u65E2\u505A\u521D\u59CB\u5316\u4E5F\u66F4\u65B0\n      patch(container._vnode || null, vnode, container)\n    }\n    container._vnode = vnode\n  }\n\n  return {\n    render\n  }\n}\n", "// h\u7684\u7528\u6CD5\n// h('div')\n// h('div', { style: { color: 'red } })\n// h('div', { style: { color: 'red } }, hello)\n// h('div', hello)\n// h('div', null, hello, 'word')\n// h('div', null, h('span))\n// h('div', null, [h('span)])\n\nimport { isArray, isObject } from '@vue/shared'\nimport { createVnode, isVnode } from './vnode'\n\nexport function h(type, propsOrChildren, children) {\n  let r = arguments.length\n\n  if (r === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      if (isVnode(propsOrChildren)) {\n        // \u865A\u62DF\u8282\u70B9\u5305\u88C5\u6210\u6570\u7EC4\n        return createVnode(type, null, [propsOrChildren])\n      }\n      // \u5C5E\u6027\n      return createVnode(type, propsOrChildren)\n    } else {\n      // \u6570\u7EC4 \u6216 \u6587\u672C\n      return createVnode(type, null, propsOrChildren)\n    }\n  } else {\n    if (r === 3 && isVnode(children)) {\n      children = [children]\n    } else if (r > 3) {\n      children = Array.from(arguments).slice(2)\n    }\n    return createVnode(type, propsOrChildren, children)\n  }\n}\n", "export const nodeOps = {\n  // \u589E\u52A0\u8282\u70B9\n  inset(child, parent, anchor = null) {\n    parent.insertBefore(child, anchor)\n  },\n  // \u5220\u9664\u8282\u70B9\n  remove(child) {\n    const parentNode = child.parentNode\n    if (parentNode) {\n      parentNode.removeChild(child)\n    }\n  },\n  setElementText(el, test) {\n    el.textContent = test\n  },\n  setText(node, test) {\n    node.nodeValue = test\n  },\n  querySelector(seletor) {\n    return document.querySelector(seletor)\n  },\n  parentNode(node) {\n    return node.parentNode\n  },\n  nexSibling(node) {\n    return node.nextSibling\n  },\n  createElement(tagName) {\n    return document.createElement(tagName)\n  },\n  createText(text) {\n    return document.createTextNode(text)\n  }\n}\n", "export function pathcAttr(el, key, nextValue) {\n  if (nextValue) {\n    el.setAttribute(key, nextValue)\n  } else {\n    el.removeAttribute(key)\n  }\n}\n", "export function pathcClass(el: Element, nextValue) {\n  if (nextValue === 'null') {\n    el.removeAttribute('class')\n  } else {\n    el.className  = nextValue\n  }\n}\n", "function createInvoker(callback) {\n  const invoker = e => invoker.value(e)\n  invoker.value = callback\n  return invoker\n}\n\nexport function pathcEvents(el, eventName, nextValue) {\n  let invokers = el._vei || (el._vei = {})\n\n  let exits = invokers[eventName]\n\n  if (exits && nextValue) {\n    exits.value = nextValue\n  } else {\n    let event = eventName.slice(2).toLocaleLowerCase()\n    if (nextValue) {\n      const invoker = (invokers[eventName] = createInvoker(nextValue))\n      el.addEventListener(event, invoker)\n    } else {\n      invokers[eventName] = undefined\n    }\n  }\n}\n", "export function pathcStyle(el, prevValue, nextValue) {\n  // \u6837\u5F0F\u6BD4\u8F83\n  for (let key in nextValue) {\n    el.style[key] = nextValue[key]\n  }\n\n  if (prevValue) {\n    for (let key in prevValue) {\n      if (nextValue[key] === null) {\n        el.style[key] = null\n      }\n    }\n  }\n}\n", "import { pathcAttr } from './modules/attr'\nimport { pathcClass } from './modules/class'\nimport { pathcEvents } from './modules/events'\nimport { pathcStyle } from './modules/style'\n\nexport function patchProp(el, key, prevValue, nextValue) {\n  // \u7C7B\u540D el.className\n  if (key === 'class') {\n    pathcClass(el, nextValue)\n  } else if (key === 'style') {\n    pathcStyle(el, prevValue, nextValue)\n  } else if (/^on[^a-z]/.test(key)) {\n    pathcEvents(el, key, nextValue)\n  } else {\n    pathcAttr(el, key, nextValue)\n  }\n}\n"],
  "mappings": "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",
  "names": ["type", "renderOptions", "render"]
}
